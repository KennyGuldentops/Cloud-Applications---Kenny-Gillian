<!DOCTYPE html>
<html lang="en">
  <head>
      <title>Cloud Applications</title>
      
      <!-- Jquery -->
      <script   src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
      
      <!-- Bootstrap, Font Awesome, Bootswatch CSS CDN -->
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      
      <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
      
      <!-- Bootstrap, Font Awesome, Bootswatch JavaScript CDN -->
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
      
      <!-- AngularJS -->
      <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.js"></script>
      
      <!-- Main css -->
      <link href="css/index.css" rel="stylesheet">
      <!-- Social buttons CSS -->
      <link href="css/bootstrap-social.css.css" rel="stylesheet">
  </head>

    <body ng-app="ApiCall" ng-cloak ng-controller="myCtrl">
        <nav class="navbar navbar-inverse">

        <div class="navbar-header">
            <a class="navbar-brand" href="/index.html">Interactive Courses</a>
        </div>
    
        <div class="containter">
            <ul class="nav navbar-nav">
                <li class="nav-item">
                    
                </li>
            </ul>
          </div>

      </nav>
        
      <ul id="vragen"></ul>
      <h1 id="devraag">Wachten voor de vraag</h1>
 
      <div id="opendiv">
        <input class="form-control input-lg" type="text" style="text-align:center" id="openantwoord"/>
        <button ng-click="addAnswer()" type="button" id="VraagButton" class="btn btn-primary btn-lg" >Antwoord vraag!</button>
        <input type="checkbox" />Moeilijk ?<br/>
      </div>
        
      <div id="janeediv">       
          <button ng-click="AnswerNEE()">nee</button>  
          <button ng-click="AnswerJA()">ja</button>
            <br>
          <input type="checkbox" />Moeilijk ?<br/>
      </div>
        
      <div id="meerkeuzediv">
           <ul>
                <li ng-repeat="antwoorde in meerkeuzeantwoorden">
                    <button ng-click="AnswerMulti(antwoorde)">{{antwoorde}}</button>
               </li>
           </ul>
        <input type="checkbox" />Moeilijk ?<br/>
      </div>
        
      <div id="afbeeldingdiv">  
        <div id="images"></div>
          <input class="form-control input-lg" type="text" style="text-align:center" id="afbeeldingantwoord"/>
          <button ng-click="addAnswer()" type="button" id="VraagButton" class="btn btn-primary btn-lg" >Antwoord vraag!</button>
        <input type="checkbox" />Moeilijk ?<br/>
      </div>
        
        
      <div id="loadingdiv">
        <div class="loader"></div>
      </div>
      <div id="closediv">
        
      </div>
        
        
      <script src="/socket.io/socket.io.js"></script>

      <script>
        $("#opendiv").hide();
        $("#janeediv").hide();
        $("#meerkeuzediv").hide();
        $("#afbeeldingdiv").hide();
        $("#loadingdiv").show();
        $("#closediv").hide();
          
        
        var mogelijkeantwoorden;
        var JA;
        var NEE;
        window.onload = function () {
                var input = document.querySelector('input[type=checkbox]');

                function check() {
                    boolcheck = input.checked ? "true" : "false";
                }
                input.onchange = check;
                check();
            };
            
        var app = angular.module("ApiCall", []);
        app.controller("myCtrl", function($scope){
        
        $scope.AnswerMulti = function(antwoorde){
            socket.emit('antwoord', { vraag: antwoorde , bool: boolcheck});
             $("#meerkeuzediv").hide();
             $("#loadingdiv").show();
            document.getElementById("devraag").innerHTML = "Wachten op nieuwe vraag";
        };
            
        $scope.addAnswer = function(){
            if(typevraag == "open"){
                socket.emit('antwoord', { vraag: $('#openantwoord').val(), bool: boolcheck });
                $('#m').val('');
            }
            if(typevraag == "afbeelding"){
                socket.emit('antwoord', { vraag: $('#afbeeldingantwoord').val(), bool: boolcheck });
                $('#m').val('');
            }
                    $("#opendiv").hide();
                    
                    $("#afbeeldingdiv").hide();
                    $("#loadingdiv").show();

                document.getElementById("devraag").innerHTML = "Wachten op nieuwe vraag";
          };
        
        $scope.AnswerJA = function(){
            JA = 'Ja';
            
            socket.emit('antwoord', { vraag: JA , bool: boolcheck});
             $("#janeediv").hide();
             $("#loadingdiv").show();
            document.getElementById("devraag").innerHTML = "Wachten op nieuwe vraag";
        };
            
        $scope.AnswerNEE = function(){
            NEE = 'Nee'
             
            socket.emit('antwoord', { vraag: NEE , bool: boolcheck});
             $("#janeediv").hide();
             $("#loadingdiv").show();
            document.getElementById("devraag").innerHTML = "Wachten op nieuwe vraag";
        };
            
        $scope.meerkeuzeantwoorden = [];
        socket.on('Antwoorden', function(Antwoorden){
            for (var i = 0; i < Antwoorden.length; i++){
                $scope.meerkeuzeantwoorden.push(Antwoorden[i].MeerkeuzeAntwoorden); 
                
                $scope.$apply();
            }
           
        });
            
        }); 
           
       
        
        //janee

        //  
        var typevraag;
        var RandomCode = localStorage.getItem('inputCode');
        var RandomFiltered = RandomCode.slice(1,-1);
        
        var socket = io("/" + RandomFiltered);
        socket.on('vraag', function(msg){
            
            $('#devraag').text(msg);  
        });
          
        socket.on('addimage', function(msg, base64image){
            $('#images').empty();
            $('#images').append
            ($('<p>').append('<img src="'+base64image+'"/>'
                )
            ); 
            
        });
          
          
        socket.on('typevraag', function(type){
           
            if (type == "code"){
                typevraag = "code";
                
                $("#opendiv").hide();
                $("#janeediv").hide();
                $("#codediv").show();
                $("#meerkeuzediv").hide();
                $("#loadingdiv").hide();
                $("#afbeeldingdiv").hide(); 
                $("#VraagButton").show();
            }
            if (type == "janee"){
                typevraag = "janee";
               
                $("#opendiv").hide();
                $("#janeediv").show();
                $("#codediv").hide();
                $("#meerkeuzediv").hide();
                $("#loadingdiv").hide();
                $("#afbeeldingdiv").hide();
                $("#VraagButton").hide();
            }
            if (type == "open"){
                typevraag = "open";
                
                $("#opendiv").show();
                $("#janeediv").hide();
                $("#codediv").hide();
                $("#meerkeuzediv").hide();
                $("#loadingdiv").hide();
                $("#afbeeldingdiv").hide();
                $("#VraagButton").show();
            }
            if (type == "meerkeuzen"){
                console.log("kappa")
                typevraag = "meerkeuzen";
               
                $("#opendiv").hide();
                $("#janeediv").hide();
                $("#codediv").hide();
                $("#meerkeuzediv").show();
                $("#loadingdiv").hide();
                $("#afbeeldingdiv").hide();
                $("#VraagButton").show();
            }
            if (type == "afbeelding"){
                typevraag = "afbeelding";
                
                $("#opendiv").hide();
                $("#janeediv").hide();
                $("#codediv").hide();
                $("#meerkeuzediv").hide();
                $("#loadingdiv").hide();
                $("#afbeeldingdiv").show();
                $("#VraagButton").show();
            }
            if (type == "Nieuwe vraag"){
                typevraag = "secondje...";
                $("#opendiv").hide();
                $("#janeediv").hide();
                $("#codediv").hide();
                $("#meerkeuzediv").hide();
                $("#afbeeldingdiv").hide();
                $("#loadingdiv").show(); 
                $("#closediv").hide();
            }
            if (type == "closed"){
                typevraag = "sluiten";
                $("#opendiv").hide();
                $("#janeediv").hide();
                $("#codediv").hide();
                $("#meerkeuzediv").hide();
                $("#afbeeldingdiv").hide();
                $("#loadingdiv").hide(); 
                $("#closediv").show();
            }
        });
      </script>
        <style>
            .loader {
              border: 16px solid #f3f3f3;
              border-radius: 50%;
              border-top: 16px solid #3498db;
              width: 120px;
              height: 120px;
              -webkit-animation: spin 2s linear infinite;
              animation: spin 2s linear infinite;
            }

            @-webkit-keyframes spin {
              0% { -webkit-transform: rotate(0deg); }
              100% { -webkit-transform: rotate(360deg); }
            }

            @keyframes spin {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
        </style>
  </body>
</html>
